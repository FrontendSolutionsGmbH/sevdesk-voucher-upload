<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>sevDesk Voucher Upload Library</h1><p>This library provides an easy to use class to upload vouchers to a <a href="http://www.sevdesk.de">sevDesk</a> account using the <a href="https://my.sevdesk.de/swaggerUI/index.html#/">sevDesk API</a>.</p>
<p><strong><a href="https://konsorten.github.io/sevdesk-voucher-upload/">Click here to open the extended documentation.</a></strong></p>
<h2>Install</h2><p>To install this library perform the following call:</p>
<pre class="prettyprint source lang-sh"><code>npm install sevdesk-voucher-upload --save</code></pre><p>The library was developed using NodeJs v8.9.x LTS. It is supposed to be compatible with the latest LTS version.</p>
<h2>Quickstart</h2><p>The library provides a class for importing a voucher from various sources. For now, only local files are supported.</p>
<pre class="prettyprint source lang-js"><code>var path = require('path');
var SevdeskVoucherImporter = require(&quot;sevdesk-voucher-upload&quot;);

const apiToken = '0123456mysevdeskapitoken012345';

let importer = new SevdeskVoucherImporter(apiToken);

importer.importLocalFile(path.join(__dirname, 'examples', 'R1001.pdf'));</code></pre><p>All functions return a promise.</p>
<p>Note that the importer object cannot be reused. Create a new importer object for each import process.</p>
<h2>Known Issues</h2><ul>
<li>none</li>
</ul>
<h2>sevDesk API Token</h2><p>The API token can be retrieved using the web interface. Best practice is to follow this process:</p>
<p>1) Create a new dedicated user for the API access.
2) Give the user admin rights (only then the API token will be shown in the web interface).
3) Login using the new API user
4) Retrieve the API Token vis <em>Settings &gt; Users</em>: https://my.sevdesk.de/#/admin/userManagement
5) Set access rights to <em>Vouchers/Receipts</em>, only</p>
<h2>Upload Process</h2><p>This is a verbal description on the general upload process:</p>
<p>1) Check, if the file exists
2) Retrieve the client information from the sevDesk API
3) Upload the file to sevDesk
4) Load all contacts for matching the voucher issuer (cached for 15 minutes)
5) Extract details from voucher
6) Determine the issuer of the voucher (this library provides extended strategies compared to the sevDesk API)
7) Estimate which accounting account to use
8) Save the voucher as draft</p>
<p>The voucher is then available from within sevDesk.</p>
<h2>Debugging</h2><p>The library uses the <a href="https://www.npmjs.com/package/debug">debug</a> library for debug messages.</p>
<p>To enable debugging add &quot;sevDesk:<em>&quot; to the </em>DEBUG* environment variable.</p>
<h2>Unit Tests</h2><p>To run the unit test, open a shell and set the following environment variables:</p>
<p><strong>Linux</strong></p>
<pre class="prettyprint source lang-sh"><code>export DEBUG='sevDesk:*'
export SEVDESK_TOKEN='0123456mysevdeskapitoken012345'</code></pre><p><strong>Windows (Powershell)</strong></p>
<pre class="prettyprint source lang-ps"><code>$env:DEBUG='sevDesk:*'
$env:SEVDESK_TOKEN='0123456mysevdeskapitoken012345'</code></pre><p>Then run the unit test command:</p>
<pre class="prettyprint source lang-sh"><code>npm test</code></pre><h2>Authors</h2><p>The library is sponsored by the <a href="http://www.konsorten.de">marvin + konsorten GmbH</a>.</p>
<p>We thank all the authors who provided code to this library:</p>
<ul>
<li>Felix Kollmann</li>
</ul>
<h2>License</h2><p>(The MIT License)</p>
<p>Copyright (c) 2017 marvin + konsorten GmbH (info@konsorten.de)</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="SevdeskVoucherImporter.html">SevdeskVoucherImporter</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Jan 09 2018 12:14:26 GMT+0100 (Mitteleurop√§ische Zeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>